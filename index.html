<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArUco NSYNC</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Courier New', monospace;
            background: white;
            color: black;
            font-weight: bold;
        }

        .info-panel {
            background: #f0f0f0;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 20px;
        }

        .timestamp {
            font-size: 96px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .markers-container {
            display: flex;
            flex-wrap: wrap;
            gap: 60px;
            justify-content: center;
            align-items: center;
        }

        .marker-group {
            text-align: center;
        }

        .marker-label {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .aruco-marker {
            width: 400px;
            height: 400px;
            border: 6px solid black;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(7, 1fr);
            margin: 0 auto;
        }

        .marker-cell {
            border: 1px solid #ccc;
        }

        .marker-cell.black {
            background-color: black;
        }

        .marker-cell.white {
            background-color: white;
        }

        .fullscreen-button {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            border: 1px solid black;
            background: white;
            cursor: pointer;
            font-size: 12px;
        }

        .day-marker-corner {
            position: fixed;
            top: 20px;
            right: 150px;
            text-align: center;
        }

        .day-marker-corner .marker-label {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            background: rgba(240, 240, 240, 0.9);
            padding: 5px;
            border-radius: 4px;
        }

        .day-marker-corner .aruco-marker {
            width: 120px;
            height: 120px;
            border: 3px solid black;
        }

        .day-marker-corner .marker-value {
            font-size: 14px;
            margin-top: 5px;
            background: rgba(240, 240, 240, 0.9);
            padding: 2px 5px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <button class="fullscreen-button" onclick="toggleFullscreen()">Fullscreen</button>
    
    <div class="day-marker-corner">
        <!-- <div class="marker-label">Day</div> -->
        <div class="aruco-marker" id="dayMarker"></div>
        <div class="marker-label">Day: <span id="dayValue"></span></div>
    </div>
    
    <div class="info-panel">
        <div class="timestamp" id="timestamp"></div>
        <div>Screen Resolution: <span id="resolution"></span></div>
        <div>Main Marker Size: 400×400 pixels | Corner Marker Size: 120×120 pixels</div>
        <div>Device Pixel Ratio: <span id="pixelRatio"></span></div>
        <div>Timezone: <span id="timezone"></span></div>
    </div>

    <div class="markers-container">
        <div class="marker-group">
            <!-- <div class="marker-label">Hour</div> -->
            <div class="aruco-marker" id="hourMarker"></div>
            <div class="marker-label">Hour: <span id="hourValue"></span></div>
        </div>

        <div class="marker-group">
            <!-- <div class="marker-label">Minute</div> -->
            <div class="aruco-marker" id="minuteMarker"></div>
            <div class="marker-label">Minute: <span id="minuteValue"></span></div>
        </div>

        <div class="marker-group">
            <!-- <div class="marker-label">Second</div> -->
            <div class="aruco-marker" id="secondMarker"></div>
            <div class="marker-label">Second: <span id="secondValue"></span></div>
        </div>
    </div>

    <script>
        function generateMarkerPattern(value) {
            const binary = value.toString(2).padStart(25, '0');
            const pattern = Array(7).fill().map(() => Array(7).fill(1));
            
            // Fill inner 5x5 area with binary pattern
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 5; j++) {
                    pattern[i + 1][j + 1] = parseInt(binary[i * 5 + j]);
                }
            }
            return pattern;
        }

        function renderMarker(containerId, pattern) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            pattern.flat().forEach(cell => {
                const div = document.createElement('div');
                div.className = `marker-cell ${cell ? 'black' : 'white'}`;
                container.appendChild(div);
            });
        }

        function updateDisplay() {
            const now = new Date();
            const timestamp = now.getTime();
            
            document.getElementById('timestamp').textContent = `Unix: ${timestamp}`;
            
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const hour = now.getHours();
            const minute = now.getMinutes();
            const second = now.getSeconds();
            
            document.getElementById('dayValue').textContent = dayOfYear;
            document.getElementById('hourValue').textContent = hour;
            document.getElementById('minuteValue').textContent = minute;
            document.getElementById('secondValue').textContent = second;
            
            renderMarker('dayMarker', generateMarkerPattern(dayOfYear));
            renderMarker('hourMarker', generateMarkerPattern(hour));
            renderMarker('minuteMarker', generateMarkerPattern(minute));
            renderMarker('secondMarker', generateMarkerPattern(second));
        }

        function updateScreenInfo() {
            document.getElementById('resolution').textContent = `${screen.width}×${screen.height}`;
            document.getElementById('pixelRatio').textContent = devicePixelRatio || 1;
            document.getElementById('timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(() => {});
            } else {
                document.exitFullscreen();
            }
        }

        updateScreenInfo();
        updateDisplay();
        setInterval(updateDisplay, 1000);
    </script>
</body>
</html>